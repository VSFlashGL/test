<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä –ê–Ω–∏–º–∞—Ü–∏–∏</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            color: white;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        #animation {
            width: 400px;
            height: 400px;
        }

        .controls {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        label {
            font-size: 1.2rem;
            font-weight: 500;
        }

        input[type="number"] {
            padding: 10px 20px;
            font-size: 1.1rem;
            border-radius: 10px;
            border: none;
            width: 100px;
            text-align: center;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            max-width: 800px;
            width: 100%;
        }

        button {
            padding: 15px;
            border-radius: 10px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        button.active {
            background: linear-gradient(to right, #4ade80, #3b82f6);
        }

        .status {
            text-align: center;
            font-size: 1.2rem;
            margin-top: 1rem;
        }

        .error {
            color: #ff6b6b;
        }

        .success {
            color: #4ade80;
        }
    </style>
</head>
<body>
    <h1>üé® –ü—Ä–æ—Å–º–æ—Ç—Ä –ê–Ω–∏–º–∞—Ü–∏–π Lottie</h1>
    
    <div class="container">
        <div id="animation"></div>
        <div class="status" id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <div class="controls">
        <label for="animNumber">–í—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é (1-51):</label>
        <input type="number" id="animNumber" min="1" max="51" value="30">
        <button onclick="loadSelectedAnimation()" style="background: linear-gradient(to right, #4ade80, #3b82f6); padding: 10px 30px;">
            –ó–∞–≥—Ä—É–∑–∏—Ç—å
        </button>
    </div>

    <div class="grid" id="grid"></div>

    <script>
        let animation = null;
        let currentAnim = 30;

        // –°–æ–∑–¥–∞–µ–º —Å–µ—Ç–∫—É –∫–Ω–æ–ø–æ–∫
        const grid = document.getElementById('grid');
        for (let i = 1; i <= 51; i++) {
            const btn = document.createElement('button');
            btn.textContent = i;
            btn.onclick = () => loadAnimation(i);
            btn.id = `btn-${i}`;
            grid.appendChild(btn);
        }

        function updateActiveButton(num) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.grid button').forEach(btn => {
                btn.classList.remove('active');
            });
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
            const activeBtn = document.getElementById(`btn-${num}`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            currentAnim = num;
            document.getElementById('animNumber').value = num;
        }

        function loadAnimation(num) {
            const status = document.getElementById('status');
            status.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            status.className = 'status';
            
            updateActiveButton(num);

            // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –∞–Ω–∏–º–∞—Ü–∏—é
            if (animation) {
                animation.destroy();
            }

            const paddedNum = String(num).padStart(2, '0');
            const animPath = `/animations/${paddedNum}_emoji.json`;

            try {
                animation = lottie.loadAnimation({
                    container: document.getElementById('animation'),
                    renderer: 'svg',
                    loop: true,
                    autoplay: true,
                    path: animPath
                });

                animation.addEventListener('data_ready', () => {
                    status.textContent = `‚úÖ –ê–Ω–∏–º–∞—Ü–∏—è #${num} –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!`;
                    status.className = 'status success';
                });

                animation.addEventListener('data_failed', () => {
                    status.textContent = `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ #${num}`;
                    status.className = 'status error';
                });
            } catch (error) {
                status.textContent = `‚ùå –û—à–∏–±–∫–∞: ${error.message}`;
                status.className = 'status error';
            }
        }

        function loadSelectedAnimation() {
            const num = parseInt(document.getElementById('animNumber').value);
            if (num >= 1 && num <= 51) {
                loadAnimation(num);
            } else {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 51');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
        window.onload = () => {
            loadAnimation(30);
        };

        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏—à —Å—Ç—Ä–µ–ª–æ–∫
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && currentAnim > 1) {
                loadAnimation(currentAnim - 1);
            } else if (e.key === 'ArrowRight' && currentAnim < 51) {
                loadAnimation(currentAnim + 1);
            }
        });
    </script>
</body>
</html>
